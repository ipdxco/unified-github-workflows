name: Update Go

on:
  workflow_dispatch:
    inputs:
      targets:
        description: "List of repository names to deploy to"
        required: true
      version:
        description: "Go version to update to"
        required: true

jobs:
  update-go:
    uses: ./.github/workflows/process.yml
    secrets: inherit
    with:
      targets: ${{ github.event.inputs.targets }}
      branch: uci/update-go
      script: update-go.sh
      defaults: |
        language:
          Go:
            versions:
              go: ${{ github.event.inputs.version }}
