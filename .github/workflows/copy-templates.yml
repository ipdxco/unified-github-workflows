name: Copy Templates

on:
  workflow_dispatch:
    inputs:
      targets:
        description: "List of repository names to deploy to"
        required: true
      force:
        description: "Force copy even if file exists"
        required: false

jobs:
  copy-templates:
    uses: ./.github/workflows/process.yml
    secrets: inherit
    with:
      targets: ${{ github.event.inputs.targets }}
      branch: uci/copy-templates
      script: copy-templates.sh
      defaults: |
        {
          "Go": {
            "files": [
              ".github/workflows/go-test.yml",
              ".github/workflows/go-check.yml",
              ".github/workflows/releaser.yml",
              ".github/workflows/release-check.yml",
              ".github/workflows/tagpush.yml",
              "version.json"
            ],
            "force": ${{ github.event.inputs.force || false }}
          },
          "JavaScript": {
            "files": [
              ".github/workflows/js-test-and-release.yml"
            ],
            "force": ${{ github.event.inputs.force || false }}
          },
          "TypeScript": {
            "files": [
              ".github/workflows/js-test-and-release.yml"
            ],
            "force": ${{ github.event.inputs.force || false }}
          },
        }
